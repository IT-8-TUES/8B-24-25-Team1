<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Pet Clicker</title>
  <link rel="stylesheet" href="clicker.css">
  <link rel="stylesheet" href="settings.css">
  <link rel="stylesheet" href="/Preslava/footer+header.css">
  <link rel="icon" type="image/png" href="/Image-sorce/catnormal.png">
   <script src="clicker.js"></script>

</head>
<body>
  <style>
     @import url('https://fonts.googleapis.com/css2?family=Pixelify+Sans&display=swap');
  </style>
  <header>Pet Clicker</header>
  <a id="profile" href="../Georgi/profile.html">Sign in</a>
  <div class="love">
    <img src="https://img.icons8.com/emoji/48/heart-suit.png" width="40" height="40" alt="Heart" />
    <span id="love">0</span>
  </div>

  <div class="pet">
    <img id="cat" src="cat.gif" alt="Cat" style=" width: 400px; height: 300px;"/>
    <p style="font-style: italic; color: #7c5c46; font-size: 40px;">Your friend!</p>
  </div>

  <div class="menu">
    <a href="../Georgi/pets.html">Pets</a>
    <a href="../Preslava/achievements.html">Achievements</a>
    <a href="../Preslava/shop.html">Shop</a>
  </div>
  <a href="settings.html" class="t-btn">Profile</a>
<script type="module">
  document.addEventListener('DOMContentLoaded', () => {
    const cat = document.getElementById('cat');
    const loveCount = document.getElementById('love');

//Yana trqbwashe da dobawq mn neshta tuk za funciite na predmetite, zatowa kato se wurna ot chuvbina move da se opitam da ti obqsnq chastite... -preslava
     let currentLove = Number(localStorage.getItem('loveCount')) || 0;
    loveCount.textContent = currentLove.toLocaleString('en-US');
    
    function startAutoclicker() {
  if (window.autoclickerInterval) return; // Prevent multiple intervals

  window.autoclickerInterval = setInterval(() => {
    let loveCount = document.getElementById('love');
    let currentLove = parseInt(loveCount.textContent.replace(',', ''));
    let multipliers = JSON.parse(localStorage.getItem('multipliers')) || [];
    let totalMultiplier = 1 + multipliers.reduce((sum, m) => sum + m, 0);

    // Check for temporary multiplier
    let temp = JSON.parse(localStorage.getItem('tempMultiplier'));
    if (temp && Date.now() < temp.expires) {
      totalMultiplier += temp.value;
    }

    currentLove += 1 * totalMultiplier; // 1 auto-click per interval
    loveCount.textContent = Math.floor(currentLove).toLocaleString('en-US');
    localStorage.setItem('loveCount', currentLove);
  }, 1000); // Every 1 second
}

// Start autoclicker if enabled in localStorage
if (localStorage.getItem('autoclickerEnabled') === 'true') {
  startAutoclicker();
}


    cat.addEventListener('click', () => {
      let currentLove = parseInt(loveCount.textContent.replace(',', ''));
      let multipliers = JSON.parse(localStorage.getItem('multipliers')) || [];
      let totalMultiplier = 1 + multipliers.reduce((sum, m) => sum + m, 0);

  // Check for temporary multiplier
      let temp = JSON.parse(localStorage.getItem('tempMultiplier'));
      if (temp && Date.now() < temp.expires) {
         totalMultiplier += temp.value;
      }



      currentLove += 1 * totalMultiplier;
      loveCount.textContent = Math.floor(currentLove).toLocaleString('en-US');
      localStorage.setItem('loveCount', currentLove);
    });

  });

  
</script>

</body>
</html>
