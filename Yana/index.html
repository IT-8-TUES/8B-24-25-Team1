<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Pet Clicker</title>
  <link rel="stylesheet" href="clicker.css">
  <link rel="stylesheet" href="settings.css">
  <link rel="stylesheet" href="/Preslava/footer+header.css">
  <link rel="icon" type="image/png" href="catnormal.png">
   <script src="clicker.js"></script>

</head>
<body>
  <style>
     @import url('https://fonts.googleapis.com/css2?family=Pixelify+Sans&display=swap');
  </style>
  <header>Pet Clicker</header>
  <a id="profile" href="/Georgi/profile.html">Profile</a>
  <div class="love">
    <img src="https://img.icons8.com/emoji/48/heart-suit.png" width="40" height="40" alt="Heart" />
    <span id="love">0</span>
  </div>

  <div class="pet">
    <img id="cat" src="/Image-sorce/cat.gif" alt="Cat" style=" width: 400px; height: 300px;"/>
    <p style="font-style: italic; color: #7c5c46; font-size: 40px;">Your friend!</p>
  </div>

  <div class="menu">
    <a href="/Georgi/pets.html">Pets</a>
    <a href="/Preslava/achievements.html">Achievements</a>
    <a href="/Preslava/shop.html">Store</a>
  </div>
  <a link="settings.html" class="t-btn">Settings</a>
  <div class="pnl" id="pnlSettings">
    <span class="c-btn">×</span>
    <h1 style="font-size: 3rem;">Профил</h1>
  
    <div class="info">
  <p><strong>Потребителско име:</strong> <span id="username">Иван</span></p>
  <button class="e-btn" id="edit-username">Промени потребителското име</button>
  <div id="username-edit" style="display: none;">
    <input type="text" id="username-input" />
    <button id="save-username">Запази</button>
  </div>

  <p><strong>Имейл:</strong> <span id="email">ivan@example.com</span></p>
  <button class="e-btn" id="edit-email">Промени имейла</button>
  <div id="email-edit" style="display: none;">
    <input type="email" id="email-input" />
    <button id="save-email">Запази</button>
    <p id="email-error" style="color: red; display: none;">Невалиден имейл!</p>
  </div>

  <p><strong>Профилна снимка:</strong></p>
  <div class="avatar-row">
    <img class="avatar" id="avatar-img" src="parzeni-kartofi.webp" alt="Примерна снимка">
    <button class="e-btn-lrg" id="edit-avatar">Промени снимката</button>
  </div>
  <div id="avatar-edit" style="display: none;">
    <input type="text" id="avatar-input" placeholder="URL на снимка" />
    <button id="save-avatar">Запази</button>
  </div>
</div>
<script type="module">
  document.addEventListener('DOMContentLoaded', () => {
    const cat = document.getElementById('cat');
    const loveCount = document.getElementById('love');

//Yana trqbwashe da dobawq mn neshta tuk za funciite na predmetite, zatowa kato se wurna ot chuvbina move da se opitam da ti obqsnq chastite... -preslava
     let currentLove = Number(localStorage.getItem('loveCount')) || 0;
    loveCount.textContent = currentLove.toLocaleString('en-US');
    
    function startAutoclicker() {
  if (window.autoclickerInterval) return; // Prevent multiple intervals

  window.autoclickerInterval = setInterval(() => {
    let loveCount = document.getElementById('love');
    let currentLove = parseInt(loveCount.textContent.replace(',', ''));
    let multipliers = JSON.parse(localStorage.getItem('multipliers')) || [];
    let totalMultiplier = 1 + multipliers.reduce((sum, m) => sum + m, 0);

    // Check for temporary multiplier
    let temp = JSON.parse(localStorage.getItem('tempMultiplier'));
    if (temp && Date.now() < temp.expires) {
      totalMultiplier += temp.value;
    }

    currentLove += 1 * totalMultiplier; // 1 auto-click per interval
    loveCount.textContent = Math.floor(currentLove).toLocaleString('en-US');
    localStorage.setItem('loveCount', currentLove);
  }, 1000); // Every 1 second
}

// Start autoclicker if enabled in localStorage
if (localStorage.getItem('autoclickerEnabled') === 'true') {
  startAutoclicker();
}


    cat.addEventListener('click', () => {
      // Вземаме текущия текст, махаме запетайката, и го превръщаме в число
      let currentLove = parseInt(loveCount.textContent.replace(',', ''));

        let multipliers = JSON.parse(localStorage.getItem('multipliers')) || [];
        // Calculate total multiplier (e.g., base 1 + sum of all bonuses)
        let totalMultiplier = 1 + multipliers.reduce((sum, m) => sum + m, 0);

    let totalClicks = Number(localStorage.getItem('totalClicks')) || 0;
    totalClicks += 1;
    localStorage.setItem('totalClicks', totalClicks);

    let temp = JSON.parse(localStorage.getItem('tempMultiplier'));
    if (temp && Date.now() < temp.expires) {
       totalMultiplier += temp.value;
    }

  if (totalClicks % 100 === 0) {
    // Set a temporary multiplier (e.g., +1 for x2) for 1 minute
    localStorage.setItem('tempMultiplier', JSON.stringify({ value: 1, expires: Date.now() + 60000 }));
  }
      

      currentLove += 1 * totalMultiplier; // Увеличаваме с 1

      // Преобразуваме числото обратно в текст с формат: 1,433
        loveCount.textContent = Math.floor(currentLove).toLocaleString('en-US');

      // Запазваме текущия брой в localStorage
      localStorage.setItem('loveCount', currentLove);
    });

  });

  
</script>

</body>
</html>
